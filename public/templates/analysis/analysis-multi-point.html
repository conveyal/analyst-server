<div class="pannel-header">
  {{#writeAllowed}}<button id="newQuery" type="button" class="btn btn-default btn-xs pull-right"> Run new query</button>{{/writeAllowed}}
     <span class="glyphicon glyphicon-cog"></span> Regional Analysis
</div>

<div style="padding: 10px;">
  <p>Click "run new query" to calculate accessibily for all origins with the study area. Regional analysis allows aggregation and weighting of accessibility measures to measure. For example, population weighted job access by region is calculated as:</p>

  <p><strong>sum blocks(regional job access x block population) / total population = regional average job access weighted by population</strong></p>
</div>

<div id="detail" style="padding: 10px;">

     <div class="panel-group" id="createQueryForm">
       <div class="panel panel-default">
         <div class="panel-heading">
           <h5 class="panel-title">
               Create Query
           </h5>
         </div>
         <div id="collapseOne" class="panel-body" style="padding: 5px;">
             <div class="form-group">
               <label for="name">{{I18n "analysis.create-new-query-name"}}</label>
               <input type="text" class="form-control" id="name" name="name" placeholder="{{I18n "analysis.create-new-query-name"}}" value="">
             </div>

             <div class="form-group">
               <label for="shapefile">{{ I18n "analysis.shapefile" }}</label>
               <select id="shapefile" class="shapefile form-control">
               </select>

               <!-- TODO: column selection should be done in the queryresults, not the query (i.e. create resultsets for all possible columns) -->
               <label for="shapefileColumn">{{ I18n "analysis.shapefile-field" }}</label>
               <select id="shapefileColumn" class="shapefile-column form-control">
               </select>
             </div>

             <div class="form-group">
               <label>{{I18n "analysis.scenario"}}</label>
               <select id="scenario1" class="scenario-list form-control">
               </select>

               <div style="margin-top: 10px;" class="btn-group mode-selector" data-toggle="buttons">
                 <label class="btn btn-default">
                   <input type="radio" name="mode1" id="modeCar" value="CAR"><span class="icon icon-car"></span>
                 </label>
                 <label class="btn btn-default active">
                   <input type="radio" name="mode1" id="modeBus" value="WALK,TRANSIT"><span class="icon icon-pedestrian"></span> + <span class="icon icon-bus"></span>
                 </label>
                 <label class="btn btn-default">
                     <input type="radio" name="mode1" id="modeBus" value="BICYCLE,TRANSIT"><span class="icon icon-bike"></span> + <span class="icon icon-bus"></span>
                   </label>
                 <label class="btn btn-default">
                   <input type="radio" name="mode1" id="modeBike" value="BICYCLE"><span class="icon icon-bike"></span>
                 </label>
                 <label class="btn btn-default">
                   <input type="radio" name="mode1" id="modePed" value="WALK"><span class="icon icon-pedestrian"></span>
                 </label>
               </div>
             </div>


             <div class="form-group">
               <label for="dateText">{{I18n "analysis.date"}}</label>
               <div class="input-group date" id="date">
                 <input id="dateText" class="form-control pickDate" type="text" value="" />
                 <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
               </div>
             </div>

             <div class="clearfix">
               <div class="form-group pull-left" style="width: 180px">
                 <label for="fromTimeText">{{I18n "analysis.earliest-departure-time"}}</label>
                 <div class="input-group date" id="fromTime" style="width: auto">
                   <input id="fromTimeText" class="form-control pickTime" type="text" />
                   <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
                 </div>
               </div>

               <div class="form-group pull-left" style="width: 180px" id="toTimeControls">
                 <label for="toTimeText">{{I18n "analysis.latest-departure-time"}}</label>
                 <div class="input-group date" id="toTime">
                   <input id="toTimeText" class="form-control pickTime" type="text" />
                   <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
                 </div>
               </div>
             </div>

             <button class="btn btn-primary" id="createQuery">{{I18n "analysis.run-query"}}</button> <button class="btn btn-default" id="cancelQuery">{{I18n "app.shared.cancel"}}</button>
         </div>
       </div>
     </div>

     <div id="main"></div>
</div>
